jQuery(document).ready(function(e){var t=1e4;e("#contents_builder").on("click",".button-add-row",function(){var n=e(this).attr("data-clone"),c=e(this).closest(".topt_repeater_wrapper");return n&&c.size()&&(t++,n=n.replace(/addindex/g,t),c.find(".topt_repeater").append(n.replace(/addindex/g,t)),c.find("#topt_repeater-"+t+" .color:input").each(function(){try{this.color=new jscolor.color(this)}catch(e){console.log(e)}})),!1}),e("#contents_builder").on("click",".button-delete-row",function(){var t=!0,n=e(this).closest(".topt_repeater").attr("data-delete-confirm");return n&&(t=confirm(n)),t&&e(this).closest(".topt_repeater-row").remove(),!1});var n=0;e("#contents_builder").sortable({handle:".cb_move"}),e("#cb_add_row_buttton_area .add_row-one_column").click(function(){var t=e("#contents_builder-clone > .one_column").get(0).outerHTML;t=t.replace(/cb_cloneindex/g,"add_"+n),n++,e("#contents_builder").append(t)}),e("#contents_builder").on("change",".cb_content_select",function(){var t=e(this).closest(".cb_column"),n=t.find(".cb_index").val();if(t.find(".cb_content_wrap").remove(),e(this).val()&&n){var c=e("#contents_builder-clone > ."+e(this).val());if(c.length){e(this).hide();var i=c.get(0).outerHTML;i=i.replace(/cb_cloneindex/g,n),t.append(i),t.find(".cb_content_wrap").addClass("open").show(),t.find(".cb_content .wp-editor-area").length&&c.find(".cb_content .wp-editor-area").each(function(){var c=e(this).attr("id"),i=c.replace(/cb_cloneindex/g,n);if("undefined"!=typeof tinyMCEPreInit.mceInit[c]){var o=e.extend(!0,{},tinyMCEPreInit.mceInit[c]);o.body_class=o.body_class.replace(/cb_cloneindex/g,n),o.selector=o.selector.replace(/cb_cloneindex/g,n),tinyMCEPreInit.mceInit[i]=o,tinymce.init(o)}if("undefined"!=typeof tinyMCEPreInit.qtInit[c]){var r=e.extend(!0,{},tinyMCEPreInit.qtInit[c]);r.id=r.id.replace(/cb_cloneindex/g,n),tinyMCEPreInit.qtInit[i]=r,quicktags(tinyMCEPreInit.qtInit[i]);try{QTags.instances[0].theButtons&&(QTags.instances[i].theButtons=QTags.instances[0].theButtons)}catch(a){}}t.find(".wp-editor-tabs .switch-tmce").length&&t.find(".wp-editor-wrap").removeClass("html-active").addClass("tmce-active")}),t.find(".cb_content_wrap .cb-color-picker").each(function(){e(this).wpColorPicker()})}}}),e("#contents_builder").on("click",".cb_delete",function(){var t=!0,n=e(this).closest("#contents_builder").attr("data-delete-confirm");n&&(t=confirm(n)),t&&e(this).closest(".cb_row").remove()}),e("#contents_builder").on("click",".cb_content_headline",function(){return e(this).parents(".cb_content_wrap").toggleClass("open"),!1}),e("#contents_builder").on("click","a.close-content",function(){return e(this).parents(".cb_content_wrap").toggleClass("open"),!1}),e("#contents_builder").on("change keyup","input.change_headline",function(){e(this).closest(".cb_content_wrap").find(".cb_content_headline span").text(e(this).val())}),e("#contents_builder").on("change keyup","textarea.change_headline",function(){e(this).closest(".cb_content_wrap").find(".cb_content_headline span").text(e(this).val())})});
